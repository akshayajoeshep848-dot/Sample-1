<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Simple Calculator</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Arial", sans-serif;
        background-color: #f5f5f5;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
      }

      .calculator {
        width: 320px;
        background-color: #fff;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        overflow: hidden;
        padding: 20px;
      }

      .display {
        background-color: #f8f8f8;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 10px;
        box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.1);
        font-size: 1rem;
        font-weight: bold;
        text-align: right;
        color: #333;
        height: 100px;
        display: flex;
        flex-direction: column;
        justify-content: flex-end;
      }

      .previous-operand {
        font-size: 0.8rem;
        color: #888;
        margin-bottom: 5px;
      }

      .current-operand {
        font-size: 1.5rem;
        height: 100%;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
        position: relative;
      }

      .buttons {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
      }

      .button {
        padding: 15px;
        font-size: 1.2rem;
        font-weight: bold;
        border: none;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.2s ease;
        background-color: #f0f0f0;
        color: #333;
      }

      .button:hover {
        background-color: #e0e0e0;
      }

      .button:active {
        transform: scale(0.95);
      }

      .button[data-value="C"] {
        background-color: #ff5252;
        color: white;
      }

      .button[data-value="÷"] {
        background-color: #ff9800;
        color: white;
      }

      .button[data-value="×"] {
        background-color: #ff9800;
        color: white;
      }

      .button[data-value="−"] {
        background-color: #ff9800;
        color: white;
      }

      .button[data-value="+"] {
        background-color: #ff9800;
        color: white;
      }

      .button[data-value="="] {
        background-color: #4caf50;
        color: white;
      }

      .button[data-value="."],
      .button[data-value="%"] {
        background-color: #90caf9;
        color: #333;
      }

      .button[data-value="0"] {
        grid-column: span 2;
      }

      /* Responsive design */
      @media (max-width: 480px) {
        .calculator {
          width: 90%;
          margin: 10px;
        }

        .button {
          font-size: 1rem;
          padding: 12px;
        }

        .button[data-value="0"] {
          grid-column: span 2;
        }
      }
    </style>
  </head>
  <body>
    <div class="calculator">
      <div class="display">
        <div class="previous-operand" id="previous-operand">0</div>
        <div class="current-operand" id="current-operand">0</div>
      </div>

      <div class="buttons">
        <button class="button" data-value="C">C</button>
        <button class="button" data-value="±">±</button>
        <button class="button" data-value="÷">÷</button>
        <button class="button" data-value="×">×</button>

        <button class="button" data-value="7">7</button>
        <button class="button" data-value="8">8</button>
        <button class="button" data-value="9">9</button>
        <button class="button" data-value="−">−</button>

        <button class="button" data-value="4">4</button>
        <button class="button" data-value="5">5</button>
        <button class="button" data-value="6">6</button>
        <button class="button" data-value="+">+</button>

        <button class="button" data-value="1">1</button>
        <button class="button" data-value="2">2</button>
        <button class="button" data-value="3">3</button>
        <button class="button" data-value="=">=</button>

        <button class="button" data-value="0">0</button>
        <button class="button" data-value="." data-type="decimal">.</button>
        <button class="button" data-value="%" data-type="percent">%</button>
      </div>
    </div>

    <script src="script.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const currentOperandDisplay =
          document.getElementById("current-operand");
        const previousOperandDisplay =
          document.getElementById("previous-operand");
        const buttons = document.querySelectorAll(".button");

        let currentOperand = "0";
        let previousOperand = "";
        let operation = null;
        let resetDisplay = false;

        // Function to update the display
        function updateDisplay() {
          currentOperandDisplay.textContent = currentOperand;
          previousOperandDisplay.textContent = previousOperand;
        }

        // Function to input a digit
        function inputDigit(digit) {
          if (currentOperand === "0" && digit !== ".") {
            currentOperand = digit;
          } else if (currentOperand === "0" && digit === ".") {
            currentOperand = "0.";
          } else if (currentOperand.length < 12) {
            currentOperand += digit;
          }

          resetDisplay = false;
          updateDisplay();
        }

        // Function to input decimal point
        function inputDecimal() {
          if (currentOperand.includes(".")) return;

          if (currentOperand === "0") {
            currentOperand = "0.";
          } else {
            currentOperand += ".";
          }

          resetDisplay = false;
          updateDisplay();
        }

        // Function to perform operations
        function performOperation(op) {
          const prev = parseFloat(previousOperand);
          const current = parseFloat(currentOperand);

          if (operation === "÷" && current === 0) {
            currentOperand = "Error";
            resetDisplay = true;
            updateDisplay();
            return;
          }

          let result = 0;

          switch (op) {
            case "+":
              result = prev + current;
              break;
            case "-":
              result = prev - current;
              break;
            case "×":
              result = prev * current;
              break;
            case "÷":
              result = prev / current;
              break;
            case "%":
              result = prev % current;
              break;
            default:
              return;
          }

          // Handle very large numbers
          if (result.toString().length > 15) {
            currentOperand = result.toExponential(10);
          } else {
            currentOperand = result.toString();
          }

          operation = null;
          previousOperand = "";
          resetDisplay = true;
          updateDisplay();
        }

        // Function to handle operation buttons
        function handleOperation(op) {
          if (currentOperand === "Error") return;

          if (previousOperand === "") {
            previousOperand = currentOperand;
          } else if (operation) {
            performOperation(operation);
          }

          operation = op;
          resetDisplay = false;
          updateDisplay();
        }

        // Function to handle clear button
        function clearAll() {
          currentOperand = "0";
          previousOperand = "";
          operation = null;
          resetDisplay = false;
          updateDisplay();
        }

        // Function to handle sign change
        function toggleSign() {
          if (currentOperand === "Error") return;

          if (currentOperand.startsWith("-")) {
            currentOperand = currentOperand.substring(1);
          } else {
            currentOperand = "-" + currentOperand;
          }

          updateDisplay();
        }

        // Function to handle percentage
        function handlePercent() {
          if (currentOperand === "Error") return;

          const value = parseFloat(currentOperand) / 100;
          currentOperand = value.toString();
          updateDisplay();
        }

        // Event listeners for buttons
        buttons.forEach((button) => {
          const value = button.getAttribute("data-value");
          const type = button.getAttribute("data-type");

          if (value === "C") {
            button.addEventListener("click", clearAll);
          } else if (value === "±") {
            button.addEventListener("click", toggleSign);
          } else if (value === "%") {
            button.addEventListener("click", handlePercent);
          } else if (["+", "-", "×", "÷"].includes(value)) {
            button.addEventListener("click", () => handleOperation(value));
          } else if (value === "=") {
            button.addEventListener("click", () => {
              if (operation && previousOperand !== "") {
                performOperation(operation);
              }
            });
          } else if (value === ".") {
            button.addEventListener("click", inputDecimal);
          } else {
            button.addEventListener("click", () => inputDigit(value));
          }
        });
      });
    </script>
  </body>
</html>
